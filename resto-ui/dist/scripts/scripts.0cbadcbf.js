(function(){"use strict";angular.module("restoApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"RestaurantsCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("restoApp").controller("RestaurantsCtrl",["$scope","$http","$location","$anchorScroll","$cookies",function(a,b,c,d,e){var f;return f="http://localhost:8000/restaurants/restaurants/",a.orderingParam="",a.searchParam="",a.getCurrentUser=function(){return b.get("http://localhost:8000/restaurants/current-user/").success(function(b){return a.user=b}).error(function(){return a.user={id:0}})},a.doSearch=function(){return a.searchParam=a.searchText,a.updateUrl()},a.doOrdering=function(b){return a.orderingParam=b!==a.orderingParam?b:"",a.updateUrl()},a.updateUrl=function(){return a.update(f+"?search="+a.searchParam+"&ordering="+a.orderingParam)},a.update=function(c){return b.get(c).success(function(b){return a.response=b,a.restaurants=b.results,b.results.length>0?a.details=b.results[0]:void 0})},a.next=function(){return a.response&&a.response.next?a.update(a.response.next):void 0},a.previous=function(){return a.response&&a.response.previous?a.update(a.response.previous):void 0},a.showDetails=function(b){var e;return a.details=b,e=c.hash(),c.hash("restaurant-details"),d(),c.hash(e)},a.gotoSearch=function(){var a;return a=c.hash(),c.hash("restaurant-search"),d(),c.hash(a)},a.vote=function(c){var d;return d="http://localhost:8000/restaurants/vote/"+a.details.id+"/",b.put(d,{vote:c}).success(function(b){return a.details.votes=b.votes})},a.voteUp=function(){return a.vote(!1)},a.voteDown=function(){return a.vote(!0)},a.visit=function(){var c;return c="http://localhost:8000/restaurants/visits/",b.post(c,{user:a.user.id,restaurant:a.details.id}).success(function(b){return b.user=a.user,a.details.visitors.unshift(b)})},a.addComment=function(c){var d;return d="http://localhost:8000/restaurants/comments/",b.post(d,{user:a.user.id,restaurant:a.details.id,comment:c}).success(function(b){return b.user=a.user,a.details.comments.unshift(b)})},a.getCommentClass=function(b){return b.user.id===a.user.id?"panel-info":"panel-default"},a.getVisitorClass=function(b){return b.user.id===a.user.id?"label-info":"label-default"},b.defaults.headers.put["X-CSRFToken"]=e.csrftoken,b.defaults.headers.post["X-CSRFToken"]=e.csrftoken,b.defaults.withCredentials=!0,a.update(f),a.getCurrentUser()}])}.call(this),function(){"use strict";angular.module("restoApp").controller("AboutCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this);